<!-- socials and footer Hydejack link open in new tabs -->
<script type="text/javascript">
  var len =  document.getElementsByClassName("no-mark-external").length;
  for (var i = 0 ; i < len; i++) {
    document.getElementsByClassName("no-mark-external")[i].setAttribute("target","_blank");
  }
</script>

<script defer type="text/javascript">
  // var spy;
  // var isHome = false;
  document.getElementById('_pushState').addEventListener('hy-push-state-load', function() {
    document.getElementsByClassName("external")[0].setAttribute("target", "_blank");
    // if (document.getElementsByClassName("home-element").length == 1){
    //   document.getElementById("_drawer--opened").closest("ul").setAttribute("id","my-awesome-nav");
    //   spy = new Gumshoe('#my-awesome-nav a');
    //   isHome = true;
    // }
  });
</script>

<!-- <script defer type="text/javascript">
  document.getElementById('_pushState').addEventListener('hy-push-state-ready', function() {
    if (isHome == true){
      spy.destroy();
      isHome = false;
    }
  });
</script> -->

<!-- reduce font size of tagline-->
<!-- incorporate typewriter.js -->
<script type="text/javascript">
  document.getElementsByClassName("sidebar-about")[0].children[2].innerHTML = "<span class='sr-only'>Research Engineer @ Orange Innovation</span><span id='mytag' aria-hidden='true'></span>";
/*  document.getElementsByClassName("sidebar-about")[0].children[2].style.fontSize = "1rem";*/  
  var typewriter = new Typewriter(mytag, {
    loop: false,
    delay: 55,
    deleteSpeed: 1
  });
  typewriter.pauseFor(2000)
  .typeString('Research Engineer @ Orange Innovation')
  .pauseFor(6000)
  .start();
</script>

<script type="text/javascript">
  function togglePopover(event, popoverId) {
    window.open('https://crypto.iacr.org/2025/papersubmission.php', '_blank').focus();
    /*event.stopPropagation();
    const popover = document.getElementById(popoverId);

    // Hide all others first
    document.querySelectorAll('.popover').forEach(p => p.style.display = 'none');

    // Show or hide this one
    if (popover.style.display === "block") {
      popover.style.display = "none";
    } else {
      popover.style.display = "block";
      const rect = event.target.getBoundingClientRect();
      popover.style.top = (window.scrollY + rect.bottom + 10) + "px";
      popover.style.left = (window.scrollX + rect.left) + "px";
    }*/
  }

  function copyText(textId) {
    const text = document.getElementById(textId).innerText;
    navigator.clipboard.writeText(text).then(() => {
      alert("Copied to clipboard!");
      closeAllPopovers();
    }).catch(err => {
      alert("Failed to copy: " + err);
    });
  }

  function closeAllPopovers() {
    document.querySelectorAll('.popover').forEach(p => p.style.display = 'none');
  }

  /* Auto-close on outside click */
  document.addEventListener('click', function(event) {
    const isPopover = event.target.closest('.popover');
    const isButton = event.target.tagName === "BUTTON";
    if (!isPopover && !isButton) {
      closeAllPopovers();
    }
  });
</script>